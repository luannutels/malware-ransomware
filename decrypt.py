
import os #biblioteca OS para utlilizar algumas funções do sistema operacional
import pyaes #bibioteca pyaes para utilizar a criptografia pyaes

#para abrir o arquivo
file_name = "foto.jpg.pyransom" #passei o nome agora criptografado
file = open(file_name, "rb") #foi aberto novamente com o open em modo de leitura (read)
file_data = file.read() #o aqruivo foi lido com o file.read
file.close() #arquivo fechado

key = b"0143256879fravtr" #chave para descriptografar (16) (chave aleatória)
aes = pyaes.AESModeOfOperationCTR(key) #novamente foi criada uma variavel aes modo de operação + chave criada
decrypt_data = aes.decrypt(file_data) #foi criada uma variavel dessa vez ela vai receber o conteudo descriptografado.

os.remove(file_name) #remoção do arquivo

new_file_name = "foto.jpg" #foi devolvido o nome original para o arquivo
new_file = open(new_file_name, "wb") #o file foi aberto em modo de escrita (write)
new_file.write(decrypt_data) #aqui foi dado um write e passado o conteudo descriptografado
new_file.close() #arquivo fechado